import{r,R as M,a as T}from"./index.BJiRiHOl.js";import{j as h}from"./jsx-runtime.BBXyepoZ.js";import{u as g,a as y}from"./utils.TBvsX0Bo.js";import{r as _}from"./index.O74o0n5A.js";function G(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function b(e,t=[]){let n=[];function s(i,a){const c=r.createContext(a),u=n.length;n=[...n,a];const l=d=>{const{scope:C,children:m,...N}=d,v=C?.[e]?.[u]||c,p=r.useMemo(()=>N,Object.values(N));return h.jsx(v.Provider,{value:p,children:m})};l.displayName=i+"Provider";function f(d,C){const m=C?.[e]?.[u]||c,N=r.useContext(m);if(N)return N;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[l,f]}const o=()=>{const i=n.map(a=>r.createContext(a));return function(c){const u=c?.[e]||i;return r.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return o.scopeName=e,[s,D(o,...t)]}function D(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const a=s.reduce((c,{useScope:u,scopeName:l})=>{const d=u(i)[`__scope${l}`];return{...c,...d}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function J(e){const t=e+"CollectionProvider",[n,s]=b(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:p,children:x}=v,R=M.useRef(null),S=M.useRef(new Map).current;return h.jsx(o,{scope:p,itemMap:S,collectionRef:R,children:x})};a.displayName=t;const c=e+"CollectionSlot",u=y(c),l=M.forwardRef((v,p)=>{const{scope:x,children:R}=v,S=i(c,x),E=g(p,S.collectionRef);return h.jsx(u,{ref:E,children:R})});l.displayName=c;const f=e+"CollectionItemSlot",d="data-radix-collection-item",C=y(f),m=M.forwardRef((v,p)=>{const{scope:x,children:R,...S}=v,E=M.useRef(null),w=g(p,E),A=i(f,x);return M.useEffect(()=>(A.itemMap.set(E,{ref:E,...S}),()=>void A.itemMap.delete(E))),h.jsx(C,{[d]:"",ref:w,children:R})});m.displayName=f;function N(v){const p=i(e+"CollectionConsumer",v);return M.useCallback(()=>{const R=p.collectionRef.current;if(!R)return[];const S=Array.from(R.querySelectorAll(`[${d}]`));return Array.from(p.itemMap.values()).sort((A,O)=>S.indexOf(A.ref.current)-S.indexOf(O.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:a,Slot:l,ItemSlot:m},N,s]}var I=globalThis?.document?r.useLayoutEffect:()=>{},U=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],K=U.reduce((e,t)=>{const n=y(`Primitive.${t}`),s=r.forwardRef((o,i)=>{const{asChild:a,...c}=o,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(u,{...c,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Q(e,t){e&&_.flushSync(()=>e.dispatchEvent(t))}function X(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...n)=>t.current?.(...n),[])}var L=T[" useInsertionEffect ".trim().toString()]||I;function Y({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[o,i,a]=$({defaultProp:t,onChange:n}),c=e!==void 0,u=c?e:o;{const f=r.useRef(e!==void 0);r.useEffect(()=>{const d=f.current;d!==c&&console.warn(`${s} is changing from ${d?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,s])}const l=r.useCallback(f=>{if(c){const d=j(f)?f(e):f;d!==e&&a.current?.(d)}else i(f)},[c,e,i,a]);return[u,l]}function $({defaultProp:e,onChange:t}){const[n,s]=r.useState(e),o=r.useRef(n),i=r.useRef(t);return L(()=>{i.current=t},[t]),r.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,s,i]}function j(e){return typeof e=="function"}function F(e,t){return r.useReducer((n,s)=>t[n][s]??n,e)}var W=e=>{const{present:t,children:n}=e,s=k(t),o=typeof n=="function"?n({present:s.isPresent}):r.Children.only(n),i=g(s.ref,H(o));return typeof n=="function"||s.isPresent?r.cloneElement(o,{ref:i}):null};W.displayName="Presence";function k(e){const[t,n]=r.useState(),s=r.useRef(null),o=r.useRef(e),i=r.useRef("none"),a=e?"mounted":"unmounted",[c,u]=F(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const l=P(s.current);i.current=c==="mounted"?l:"none"},[c]),I(()=>{const l=s.current,f=o.current;if(f!==e){const C=i.current,m=P(l);e?u("MOUNT"):m==="none"||l?.display==="none"?u("UNMOUNT"):u(f&&C!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),I(()=>{if(t){let l;const f=t.ownerDocument.defaultView??window,d=m=>{const v=P(s.current).includes(CSS.escape(m.animationName));if(m.target===t&&v&&(u("ANIMATION_END"),!o.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",l=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},C=m=>{m.target===t&&(i.current=P(s.current))};return t.addEventListener("animationstart",C),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(l),t.removeEventListener("animationstart",C),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:r.useCallback(l=>{s.current=l?getComputedStyle(l):null,n(l)},[])}}function P(e){return e?.animationName||"none"}function H(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}export{K as P,J as a,G as b,b as c,Y as d,X as e,W as f,Q as g,I as u};
