import{j as e}from"./jsx-runtime.BBXyepoZ.js";import{r as s}from"./index.BJiRiHOl.js";import{S as w,h as v}from"./react-google-recaptcha-v3.esm.IciOIPVp.js";import{X as S}from"./x.D1Ho1pK_.js";import{c as g}from"./createLucideIcon.diKuDrnw.js";import"./_commonjsHelpers.Cpj98o6Y.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=g("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=g("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function C({isOpen:r,onClose:a}){const[i,d]=s.useState(""),[o,m]=s.useState(""),[x,u]=s.useState(!1),[c,l]=s.useState(null),[p,y]=s.useState(),[f,j]=s.useState(!1);s.useEffect(()=>{const t=n=>{n.key==="Escape"&&a()};return r&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[r,a]);const k=s.useCallback(t=>{y(t)},[]),N=async t=>{t.preventDefault(),u(!0),l(null);try{const n=await fetch("/api/newsletter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,name:o,token:p})}),h=await n.json();n.ok?(l({type:"success",text:h.message||"Thanks for subscribing! Check your email to confirm."}),d(""),m(""),setTimeout(()=>{a()},2e3)):l({type:"error",text:h.message||"Something went wrong. Please try again."})}catch{l({type:"error",text:"Failed to subscribe. Please try again later."})}finally{u(!1),j(!0)}};return r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:a,children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 p-8",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close modal",children:e.jsx(S,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-accent rounded-full mb-4",children:e.jsx(b,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Join the Newsletter"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Get the latest articles, updates, and exclusive content delivered straight to your inbox."})]}),e.jsx(w,{onVerify:k,refreshReCaptcha:f}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name (optional)"}),e.jsx("input",{type:"text",id:"name",value:o,onChange:t=>m(t.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",value:i,onChange:t=>d(t.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"you@example.com"})]}),c&&e.jsx("div",{className:`p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:c.text}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-accent hover:bg-accent/90 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Subscribing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5"}),"Subscribe"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"By subscribing, you agree to receive emails from us. Unsubscribe anytime."})]})]})}):null}function M(){const[r,a]=s.useState(!1),i=()=>{a(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-40 bg-card shadow-lg",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-center py-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"w-5 h-5 hidden sm:block flex-shrink-0"}),e.jsxs("p",{className:"text-sm sm:text-base",children:[e.jsx("span",{className:"font-semibold",children:"Ready to Level Up?"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Join my Newsletter and become a better Engineer"}),e.jsx("span",{className:"sm:hidden",children:"Subscribe to my Newsletter and Become a better Engineer!"})]})]}),e.jsx("button",{type:"submit",onClick:i,className:"btn btn-primary",children:"Signup"})]})})}),e.jsx("div",{className:"h-[52px] sm:h-[56px]"}),e.jsx(C,{isOpen:r,onClose:()=>a(!1)})]})}function P(){return e.jsx(v,{scriptProps:{async:!0},useEnterprise:!0,reCaptchaKey:"6Lfc03YpAAAAAAxYZObQWCJGY9sVJBcvdc-gsutE",children:e.jsx(M,{})})}export{P as NewsletterBanner};
