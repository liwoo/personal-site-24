---

---

<div class="hero-grid-container">
  <div class="grid md:hidden grid-cols-6 grid-rows-4 gap-2 -scale-x-100">
    {
      Array.from({ length: 24 }).map((_, i) => (
        <div
          data-square={`sq-${i + 1}`}
          class="about-squared h-8 w-8 bg-primary opacity-[0.03] rounded-xl hover:opacity-20 transition-all ease-in-out duration-75"
        />
      ))
    }
  </div>
  <div class="hidden md:grid lg:hidden grid-cols-8 grid-rows-4 gap-4 -scale-x-100">
    {
      Array.from({ length: 45 }).map((_, i) => (
        <div
          data-square={`sq-${i + 1}`}
          class="about-squared h-8 w-8 bg-primary opacity-[0.02] rounded-xl hover:opacity-10 transition-all ease-in-out duration-75"
        />
      ))
    }
  </div>
  <div class="hidden lg:grid xl:hidden grid-cols-10 grid-rows-8 gap-4 -scale-x-100">
    {
      Array.from({ length: 66 }).map((_, i) => (
        <div
          data-square={`sq-${i + 1}`}
          class="about-squared h-10 w-10 bg-primary opacity-[0.04] rounded-xl hover:opacity-10 transition-all ease-in-out duration-75"
        />
      ))
    }
  </div>
  <div class="hidden xl:grid grid-cols-12 grid-rows-8 gap-4 -scale-x-100">
    {
      Array.from({ length: 78 }).map((_, i) => (
        <div
          data-square={`sq-${i + 1}`}
          class="about-squared h-12 w-12 bg-primary opacity-[0.02] rounded-xl hover:opacity-10 transition-all ease-in-out duration-75"
        />
      ))
    }
  </div>
</div>

<style>
  .about-squared {
    transition: opacity 150ms ease-in-out;
  }

  .about-squared.disco-active {
    opacity: 0.3 !important;
    animation: disco-pulse 300ms ease-in-out;
  }

  @keyframes disco-pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }
</style>

<script>
  function startDiscoAnimation() {
    const squares = document.querySelectorAll('.about-squared');
    if (!squares.length) return;

    let animationInterval;
    const animationDuration = 3000; // 3 seconds
    const startTime = Date.now();

    // Function to randomly light up squares
    function discoStep() {
      // Clear all active states
      squares.forEach((square) => square.classList.remove('disco-active'));

      // Randomly select squares to light up (between 5-15 squares)
      const numSquares = Math.floor(Math.random() * 10) + 5;
      const indices = new Set();

      while (indices.size < numSquares && indices.size < squares.length) {
        indices.add(Math.floor(Math.random() * squares.length));
      }

      indices.forEach((index) => {
        squares[index].classList.add('disco-active');
      });

      // Check if 3 seconds have passed
      if (Date.now() - startTime >= animationDuration) {
        clearInterval(animationInterval);
        // Clear all animations
        squares.forEach((square) => square.classList.remove('disco-active'));
      }
    }

    // Start the animation with random intervals between 50-150ms
    function scheduleNext() {
      discoStep();
      if (Date.now() - startTime < animationDuration) {
        const nextDelay = Math.random() * 100 + 50;
        animationInterval = setTimeout(scheduleNext, nextDelay);
      }
    }

    // Start immediately
    scheduleNext();
  }

  // Run on page load
  document.addEventListener('DOMContentLoaded', startDiscoAnimation);

  // Also run on Astro page transitions
  document.addEventListener('astro:page-load', startDiscoAnimation);
</script>
