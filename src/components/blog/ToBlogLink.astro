---
import { Icon } from 'astro-icon/components';
import { getBlogPermalink } from '~/utils/permalinks';
import { I18N } from '~/utils/config';
import Button from '~/components/ui/Button.astro';

type Props = {
  link?: string;
  text?: string;
};

const { textDirection } = I18N;

const { link, text = "Back to Articles"} = Astro.props;
---

<div class="blog-link-container">
  <Button variant="subtle" class="px-3 md:px-3" href={link ?? getBlogPermalink()}>
    {
      textDirection === 'rtl' ? (
        <Icon name="tabler:arrow-right" class="w-5 h-5 mr-1 -ml-1.5 rtl:-mr-1.5 rtl:ml-1" />
      ) : (
        <Icon name="tabler:arrow-left" class="w-5 h-5 mr-1 -ml-1.5 rtl:-mr-1.5 rtl:ml-1" />
      )
    } { text }
  </Button>
</div>

<style>
  .blog-link-container {
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  .blog-link-container.animate-in {
    opacity: 1;
    transform: translateX(0);
  }
</style>

<script>
  const initBlogLinkAnimation = () => {
    const blogLink = document.querySelector('.blog-link-container');

    setTimeout(() => {
      blogLink?.classList.add('animate-in');
    }, 100);
  };

  // Initial load
  window.addEventListener('load', initBlogLinkAnimation);

  // Re-initialize on Astro page transitions
  document.addEventListener('astro:page-load', initBlogLinkAnimation);
</script>
