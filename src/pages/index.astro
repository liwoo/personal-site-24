---
import Layout from '~/layouts/PageLayout.astro';

import HomeHero from '~/components/widgets/HomeHero.astro';
import HomeAbout from '~/components/widgets/HomeAbout.astro';
import { footerData } from '~/data/navigation';
import HomeArticles from '~/components/widgets/HomeArticles.astro';
import Button from '~/components/ui/Button.astro';

export const prerender = true;

const metadata = {
  ignoreTitleTemplate: true,
};

const name: string = 'Liwu';
---

<Layout metadata={metadata}>
  <HomeHero socialLinks={footerData.socialLinks} title="AI Engineer" name="Jeremiah Chienda">
    <Fragment slot="description">
      <span class="hidden md:inline"
        >Hi ğŸ‘‹ğŸ½, I'm Jeremiah. I build <span class="underlined">AI agents</span> that actually work in production. <a
          href="/contact">Let's connect</a
        > if that sort of thing interests you</span
      ><span class="md:hidden">Hi ğŸ‘‹ğŸ½, I'm Jeremiah. I build <span class="underlined">AI agents</span> that ship.</span>
    </Fragment>
  </HomeHero>
  <div class="scroll-fade-in">
    <HomeAbout />
  </div>
  <div class="scroll-fade-in">
    <HomeArticles />
  </div>
  <div class="scroll-fade-in">
    <section class="container py-16 text-center">
      <h2 class="text-2xl font-semibold mb-3">Looking for an AI Engineer?</h2>
      <p class="text-muted max-w-xl mx-auto mb-6">
        I'm open to contract and full-time AI engineering opportunities â€” agent systems, RAG pipelines, LLM
        applications, and AI product strategy.
      </p>
      <Button href="/contact" variant="primary">Let's Talk</Button>
    </section>
  </div>
</Layout>

<style>
  .scroll-fade-in {
    opacity: 0;
    transform: translateY(30px);
    transition:
      opacity 0.8s ease-out,
      transform 0.8s ease-out;
  }

  .scroll-fade-in.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  const observerCallback = (entries: IntersectionObserverEntry[]) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  };

  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px',
  };

  const observer = new IntersectionObserver(observerCallback, observerOptions);

  // Observe all elements with the scroll-fade-in class
  const animatedElements = document.querySelectorAll('.scroll-fade-in');
  animatedElements.forEach((element) => observer.observe(element));

  // Re-observe on Astro page transitions
  document.addEventListener('astro:page-load', () => {
    const elements = document.querySelectorAll('.scroll-fade-in');
    elements.forEach((element) => observer.observe(element));
  });
</script>
